
# Homework42
#Chingpo Lin

-----

## 4. what is JPA? and what is Hibernate?

- Java Persistence API (JPA):interface and annotations for ORM, can interact with relational database
- Hibernate: is ORM framework implements JPA specification. simplify process of ORM

---

## 5. What is Hikari? what is the benefits of connection pool?

- connection pooling library for java application and provide a pool of db connections.

- make use of cpu resource and prevent high concurrency.

---

## 6. What is the  @OneToMany, @ManyToOne, @ManyToMany? write some examples.

one post to many comments is one to many,  
many comments to one post is many to one
many users write many comments is many to many

---

## 7. What is the  cascade = CascadeType.ALL, orphanRemoval = true? and what are the other CascadeType and their features? In which situation we choose which one?

- cascade = CascadeType.ALL: it means that all operations (e.g., persist, merge, remove, refresh) performed on the parent entity will be cascaded to its child entities as well. For example, if you save or delete the parent entity, the associated child entities will also be saved or deleted.
- orphanRemoval = true: The orphanRemoval attribute is used to specify whether orphaned child entities should be automatically removed from the database when they are no longer associated with the parent entity. An orphaned child entity is an entity that has no parent and is no longer referenced by any other part of the application.
- CascadeType.PERSIST: Cascades the persist operation to the associated entities
- CascadeType.REMOVE: Cascades the remove operation to the associated entities

---

## 8. What is the  fetch = FetchType.LAZY, fetch = FetchType.EAGER? what is the difference? In which situation you choose which one?

- fetch = FetchType.LAZY: only loads associated entities
- fetch = FetchType.EAGER: loads all associated entities along with parent entity.

---

## 9. What is the rule of JPA naming convention? Shall we implement the method by ourselves? Could you list some examples?

- Camel form, no we don't like findByLastNameAndFirstName(String l, String f)

---

## 14 What is JPQL?

is a query language defined by the Java Persistence API (JPA) for querying entities stored in a relational database. JPQL is similar to SQL (Structured Query Language) but operates at the object level

---

## 15. What is @NamedQuery and @NamedQueries?

@NamedQuery and @NamedQueries are JPA annotations used to define named queries for entities. Named queries allow you to pre-define and give a name to JPQL (Java Persistence Query Language) queries that can be reused across your application.

example:
@Entity
@NamedQueries({
@NamedQuery(name = "Department.findAll", query = "SELECT d FROM Department d"),
@NamedQuery(name = "Department.findByLocation", query = "SELECT d FROM Department d WHERE d.location = :location")
})
public class Department {
// ...
}  

To execute a named query, you can use the EntityManager or Query object's createNamedQuery method:
TypedQuery<Department> query = entityManager.createNamedQuery("Department.findAll", Department.class);
List<Department> departments = query.getResultList();

## 16. What is @Query? In which Interface we write the sql or JPQL?

@Query is a Spring Data JPA annotation used to define custom queries in a Spring Data repository interface.

example
`@Repository
public interface EmployeeRepository extends JpaRepository<Employee, Long> {
@Query("SELECT e FROM Employee e WHERE e.department = :deptName")
List<Employee> findEmployeesByDepartment(@Param("deptName") String departmentName);


@Repository
public interface EmployeeRepository extends JpaRepository<Employee, Long> {
@Query("SELECT e FROM Employee e WHERE e.department = :deptName")
List<Employee> findEmployeesByDepartment(@Param("deptName") String departmentName);

@Query(value = "SELECT * FROM employees WHERE age > :age", nativeQuery = true)
List<Employee> findEmployeesByAge(@Param("age") int age);
}

---

## 17. What is HQL and Criteria Queries?

HQL (Hibernate Query Language) and Criteria Queries are two query mechanisms provided by Hibernate, a popular ORM (Object-Relational Mapping) framework. Both mechanisms allow you to perform database queries and retrieve data from the database using Hibernate's object-oriented approach.

---

## 18. What is EnityManager?

The EntityManager is a central interface in the Java Persistence API (JPA) used to interact with the persistence context and manage JPA entities in a Java application

Once you have an EntityManager, you can use it to perform various operations on JPA entities and manage their lifecycle within the persistence context

---

## 19. What is SessionFactory and Session?

They play a crucial role in managing the lifecycle of Hibernate sessions and providing access to the underlying database

SessionFactory is a thread-safe factory for creating Session instances in Hibernate
Session represents a single unit of work with the database in Hibernate
---

## 20.  What is Transaction? how to manage your transaction?

a transaction ensures that all operations within the transaction are either completed successfully or completely rolled back in case of failure  

The ACID properties characterize a transaction:
Atomicity: A transaction is atomic, meaning it either completes in its entirety or is entirely rolled back if any part of it fails.
Consistency: A transaction ensures that the database remains in a valid state before and after its execution.
Isolation: A transaction's intermediate state is not visible to other transactions until it is committed.
Durability: Once a transaction is committed, its changes are permanent and survive any subsequent system failures.

---

## 21. What is hibernate Caching?

Caching allows Hibernate to store frequently accessed data in memory, making subsequent queries faster and reducing the need to repeatedly fetch data from the database.

---

## 22. What is the difference between first-level cache and second-level cache?

- first level: When you retrieve an entity using Hibernate, the entity is stored in the first level cache within the current session. Subsequent requests for the same entity during the same session will be retrieved from the cache, avoiding additional database queries  
- second level: This cache stores objects that are frequently accessed across different sessions, reducing the database load and improving overall application performance.

---

## 23. How do you understand @Transactional? 

@Transactional is an annotation in Spring Framework used to demarcate transactional boundaries for methods or classes.

---

## 24. Write a simple factory design pattern

already wrote in MavenProject folder



# Exception & validation

## 2. what is the @configuration and @bean?

The @Configuration annotation is used to indicate that a class defines Spring bean configurations.  

The @Bean annotation is used to define a Spring bean. When you annotate a method with @Bean within a @Configuration class, Spring will register the return value of that method as a bean in the Spring container.

---

## 3. How do you handle the exception in Spring?

@ExceptionHandler and @ControllerAdvice

--- 

## 4. How do you do the validations in Spring? And list some validation annotaitons you know.

use validation api like @NotNull, @Size, @Email, and use @Valid in request.

---

## 5. What is the actuator?

Spring Boot Actuator is a subproject of the Spring Boot framework that provides production-ready features to monitor, manage, and interact with your Spring Boot application at runtime

---
